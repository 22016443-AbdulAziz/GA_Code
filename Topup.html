<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--title page-->
  <title>Top-up</title>
  <link rel="icon" href="axe.png">

  <!--Bootstrap CSS Link-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body{
      background: rgb(245,245,220);
    }
    img {
      width: 60px;
    }

    table {
      border-style: solid;
      margin-left: auto;
      margin-right: auto;
    }
    tr{
      border: solid;
            background: rgba(255,255,255,0.4);
    }

    td {
      padding: 10px;
    }
    .center{
      margin-left: auto;
      margin-right: auto;
      text-align: center;
      width: 400px;
    }
    button{
      width: 100px;
      height: 50px;
      font-size: large;
    }
  </style>
</head>

<body>
  <section class="center">
  <table>
    <tr>
      <td>
        No Fee
        <br>
        VISA
        <br>
        6789
      </td>
      <td>
        <button onclick="top_up()">+$10</button>
      </td>
    </tr>
    <tr onclick="window.location.href='Topup_QR.html'">
      <td><img src="QR_code.jpg" alt="QR icon"></td>
      <td>
        <h3>QR code</h3>
        <p>Upload QR code using the scan-to-pay feature in the app</p>
      </td>
    </tr>
    <tr>
      <td><img src="Debit_Credit_card.jpg" alt="Card icon"></td>
      <td>
        <h3>Cards</h3>
        <p>Use Visa, MasterCard and more</p>
      </td>
    </tr>
  </table>
<br><br>
  <button onclick="window.location.href = 'home.html'" >Back</button>
</section>






<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function top_up() {
        if (localStorage.getItem("name") in localStorage) {
            let bal = JSON.parse(localStorage.getItem(localStorage.getItem("name")))[0];
            let sgd = bal.SGD;
            let amount = parseFloat(sgd); // Convert to number

            amount += 10;

            bal.SGD = amount; // Update the SGD balance

            // Update the entire user_balance array in local storage
            let user_balance = [
                {
                    "SGD": bal.SGD,
                    "USD": bal.USD,
                    "HKD": bal.HKD,
                    "JPY": bal.JPY,
                    "MYR": bal.MYR,
                }
            ];

            localStorage.setItem(localStorage.getItem("name"), JSON.stringify(user_balance));
            alert("You have topped up 10 SGD. Your new balance: " + user_balance[0].SGD);
        } else {
            // Handle the case where user data is not present in local storage
            alert("User data not found. Please log in or create an account.");
        }
    }
</script>

</body>

</html>